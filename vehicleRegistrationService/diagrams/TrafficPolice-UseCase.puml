@startuml
title Traffic Police Service - Use Case Diagram

left to right direction
skinparam packageStyle rectangle
skinparam actorStyle awesome

actor "Traffic Police Officer" as Officer
actor "Admin / Superuser" as Admin
actor "Vehicle Registration Service" as Registry
actor "Auth Service" as Auth
actor "Notification Service" as Notification

rectangle "Traffic Police Service" {
  
  usecase "Authenticate (JWT)" as UC_Auth
  
  ' Read-only actions (Officers)
  usecase "Check Vehicle Dossier" as UC_Check
  usecase "Search Violations" as UC_SearchV
  usecase "Search Accidents" as UC_SearchA
  usecase "List Stolen Vehicles" as UC_ListStolen
  usecase "List Officers" as UC_ListOfficers
  usecase "List Vehicle Flags" as UC_ListFlags
  usecase "Download Violation PDF" as UC_DownloadPDF
  
  ' Write actions (Admin/Police)
  usecase "Issue Traffic Violation" as UC_IssueV
  usecase "Pay Violation" as UC_PayV
  usecase "Report Traffic Accident" as UC_ReportA
  usecase "Add Vehicle Flag (Warrant)" as UC_AddFlag
  usecase "Resolve Vehicle Flag" as UC_ResolveFlag
  usecase "Register New Officer" as UC_AddOfficer

  ' Public/Shared Write Action
  usecase "Report Stolen Vehicle" as UC_ReportStolen

}

' Inheritance: Admin can do everything an Officer can
Admin -|> Officer

' ----------------------------------------------------
' Authentication
' ----------------------------------------------------
Officer --> UC_Auth
UC_Auth ..> Auth : <<include>> 
(Verify Token)

' ----------------------------------------------------
' Base Actions (Officer)
' ----------------------------------------------------
Officer --> UC_Check
Officer --> UC_SearchV
Officer --> UC_SearchA
Officer --> UC_ListStolen
Officer --> UC_ListOfficers
Officer --> UC_ListFlags
Officer --> UC_DownloadPDF
Officer --> UC_PayV

Officer --> UC_ReportStolen

' ----------------------------------------------------
' Admin/Management Actions
' ----------------------------------------------------
Admin --> UC_IssueV
Admin --> UC_ReportA
Admin --> UC_AddFlag
Admin --> UC_ResolveFlag
Admin --> UC_AddOfficer

' ----------------------------------------------------
' External System Integrations (Backend Logic)
' ----------------------------------------------------

' Vehicle Registration Service dependencies
UC_Check <.. Registry : <<called by>> 
(Validate before transfer)
UC_ReportA ..> Registry : <<include>> 
(Sync accident status)
UC_ReportStolen ..> Registry : <<include>> 
(Lock asset)

' Notification Service dependencies
UC_PayV ..> Notification : <<include>> 
(Send email receipt)

@enduml